{"version":3,"sources":["pages/menus/style.less","pages/menus/MenuEdit.jsx","pages/menus/ActionEdit.jsx","pages/menus/index.jsx","options/index.js","options sync nonrecursive //.js$","options/system.js","webpack://react-admin-drag/./src/pages/menus/style.less?b9e7"],"names":["___CSS_LOADER_EXPORT___","push","module","i","locals","menuTargetOptions","options","menuTarget","TabPane","config","props","isAdd","selectedMenu","onSubmit","onValuesChange","useForm","form","useState","loading","setLoading","addTabKey","setAddTabKey","useHeight","textAreaHeight","contentRef","useRef","hasSelectedMenu","Object","keys","length","isAddTop","isAddSub","title","WITH_SYSTEMS","deleteMenu","ajax","useDel","run","saveMenu","usePost","branchSaveMenu","updateMenu","fetchMenuByName","useGet","saveRole","values","a","params","type","sort","order","ord","menus","parentId","json5","parse","error","content","res","id","systemId","name","enabled","remark","isUpdate","useEffect","resetFields","initialValues","target","setFieldsValue","checkName","useDebounceValidator","rule","value","menu","getFieldValue","menuId","Error","isDelete","layout","labelCol","flex","onFinish","styles","pane","ref","activeKey","onChange","key","tab","hidden","label","tooltip","required","getPopupContainer","current","checkedChildren","unCheckedChildren","shouldUpdate","noStyle","rules","validator","pattern","message","startsWith","Promise","reject","resolve","noSpace","rows","style","height","placeholder","footerAction","onConfirm","danger","htmlType","save","successTip","actions","marginTop","description","List","fields","add","remove","map","display","marginBottom","align","initialValue","MinusCircleOutlined","color","onClick","block","icon","PlusOutlined","disabled","path","setIsAdd","setSelectedMenu","hasUnSaveMenu","setHasUnSaveMenu","hasUnSaveAction","setHasUnSaveAction","formatResult","item","index","arr","filter","it","data","fetchMenus","checkUnSave","showTip","confirm","handleClick","menuData","find","useMemo","menuTreeData","convertToTree","b","loop","nodes","children","SubMenu","e","stopPropagation","data-menu","theme","antPrefix","Item","menuItems","nextNode","findNextNode","fitHeight","menuRoot","menuTop","menuContent","mode","selectable","selectedKeys","info","result","req","require","forEach","includes","default","entries","k","wrapperOptions","webpackContext","webpackContextResolve","__webpack_require__","o","code","exports","yesNo","tag","sex","system","get","list","meta","action","api","__esModule"],"mappings":"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","file":"static/js/11.4aad1f7d.chunk.js","sourcesContent":["// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".menuRoot_2P-EX {\\n  display: flex;\\n}\\n.menu_ERmcs {\\n  flex: 0 0 210px;\\n  width: 210px;\\n  display: flex;\\n  flex-direction: column;\\n  border-right: 1px solid #d9d9d9;\\n}\\n.menu_ERmcs .menuTop_17CH7 {\\n  padding: 8px;\\n  margin-right: 8px;\\n  display: flex;\\n  align-items: center;\\n  border-bottom: 1px solid #d9d9d9;\\n}\\n.menu_ERmcs .menuContent_ko9de {\\n  flex: 1;\\n  overflow: auto;\\n}\\n.menu_ERmcs .react-admin-drag-menu-submenu {\\n  position: relative;\\n}\\n.menu_ERmcs .react-admin-drag-menu-submenu:after {\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  height: 44px;\\n  border-right: 3px solid #1890ff;\\n  transform: scaleY(0.0001);\\n  opacity: 0;\\n  transition: transform 0.15s cubic-bezier(0.215, 0.61, 0.355, 1), opacity 0.15s cubic-bezier(0.215, 0.61, 0.355, 1);\\n  content: '';\\n}\\n.menu_ERmcs .react-admin-drag-menu-submenu.react-admin-drag-menu-item-selected:after {\\n  opacity: 1;\\n  transform: scaleY(1);\\n}\\n.pane_2-ul6 {\\n  flex: 1;\\n  display: flex;\\n  flex-direction: column;\\n  border-right: 1px solid #d9d9d9;\\n}\\n.title_2SONm {\\n  flex: 0 0 40px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding-top: 8px;\\n}\\n.content_2wXZi {\\n  flex: 1;\\n  overflow: auto;\\n  padding: 8px 32px;\\n}\\n.footerAction_3DfR_ {\\n  flex: 0 0 50px;\\n  justify-content: flex-end;\\n  border-top: 1px solid #d9d9d9;\\n  padding: 0 10px;\\n  margin: 0 8px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://src/pages/menus/style.less\"],\"names\":[],\"mappings\":\"AAEA;EACI,aAAA;AAGJ;AAAA;EACI,eAAA;EACA,YAAA;EACA,aAAA;EACA,sBAAA;EACA,+BAAA;AAEJ;AAPA;EAQQ,YAAA;EACA,iBAAA;EACA,aAAA;EACA,mBAAA;EACA,gCAAA;AAER;AAdA;EAgBQ,OAAA;EACA,cAAA;AACR;AAlBA;EAsBY,kBAAA;AADZ;AAGY;EACI,kBAAA;EACA,MAAA;EACA,QAAA;EACA,YAAA;EACA,+BAAA;EACA,yBAAA;EACA,UAAA;EACA,kHAAA;EACA,WAAA;AADhB;AAhCA;EAsCY,UAAA;EACA,oBAAA;AAHZ;AAQA;EACI,OAAA;EACA,aAAA;EACA,sBAAA;EACA,+BAAA;AANJ;AASA;EACI,cAAA;EACA,aAAA;EACA,uBAAA;EACA,mBAAA;EACA,gBAAA;AAPJ;AAUA;EACI,OAAA;EACA,cAAA;EACA,iBAAA;AARJ;AAWA;EACI,cAAA;EACA,yBAAA;EACA,6BAAA;EACA,eAAA;EACA,aAAA;AATJ\",\"sourcesContent\":[\"@import \\\"src/theme\\\";\\n\\n.menuRoot {\\n    display: flex;\\n}\\n\\n.menu {\\n    flex: 0 0 210px;\\n    width: 210px;\\n    display: flex;\\n    flex-direction: column;\\n    border-right: 1px solid @border-color-base;\\n\\n    .menuTop {\\n        padding: 8px;\\n        margin-right: 8px;\\n        display: flex;\\n        align-items: center;\\n        border-bottom: 1px solid @border-color-base;\\n    }\\n\\n    .menuContent {\\n        flex: 1;\\n        overflow: auto;\\n    }\\n\\n    :global {\\n        .@{ant-prefix}-menu-submenu {\\n            position: relative;\\n\\n            &:after {\\n                position: absolute;\\n                top: 0;\\n                right: 0;\\n                height: 44px;\\n                border-right: 3px solid @primary-color;\\n                transform: scaleY(0.0001);\\n                opacity: 0;\\n                transition: transform 0.15s cubic-bezier(0.215, 0.61, 0.355, 1), opacity 0.15s cubic-bezier(0.215, 0.61, 0.355, 1);\\n                content: '';\\n            }\\n        }\\n\\n        .@{ant-prefix}-menu-submenu.@{ant-prefix}-menu-item-selected:after {\\n            opacity: 1;\\n            transform: scaleY(1);\\n        }\\n    }\\n}\\n\\n.pane {\\n    flex: 1;\\n    display: flex;\\n    flex-direction: column;\\n    border-right: 1px solid @border-color-base;\\n}\\n\\n.title {\\n    flex: 0 0 40px;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    padding-top: 8px;\\n}\\n\\n.content {\\n    flex: 1;\\n    overflow: auto;\\n    padding: 8px 32px;\\n}\\n\\n.footerAction {\\n    flex: 0 0 50px;\\n    justify-content: flex-end;\\n    border-top: 1px solid @border-color-base;\\n    padding: 0 10px;\\n    margin: 0 8px;\\n}\\n\\n\\n@packageName: react-admin-drag;\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"antPrefix\": \"react-admin-drag\",\n\t\"raLibPrefix\": \"react-admin-drag\",\n\t\"menuRoot\": \"menuRoot_2P-EX\",\n\t\"menu\": \"menu_ERmcs\",\n\t\"menuTop\": \"menuTop_17CH7\",\n\t\"menuContent\": \"menuContent_ko9de\",\n\t\"pane\": \"pane_2-ul6\",\n\t\"title\": \"title_2SONm\",\n\t\"content\": \"content_2wXZi\",\n\t\"footerAction\": \"footerAction_3DfR_\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","import {useState, useEffect, useRef} from 'react';\nimport {Button, Form, Modal, Space, Tabs, Popconfirm} from 'antd';\nimport json5 from 'json5';\nimport {\n    FormItem,\n    Content,\n    useHeight,\n    useDebounceValidator,\n} from '@ra-lib/admin';\nimport config from 'src/commons/config-hoc';\nimport {WITH_SYSTEMS} from 'src/config';\nimport options from 'src/options';\nimport styles from './style.less';\n\nconst menuTargetOptions = options.menuTarget;\n\nconst TabPane = Tabs.TabPane;\n\nexport default config()(function MenuEdit(props) {\n    const {isAdd, selectedMenu, onSubmit, onValuesChange} = props;\n\n    const [form] = Form.useForm();\n    const [loading, setLoading] = useState(false);\n    const [addTabKey, setAddTabKey] = useState('1');\n    const [textAreaHeight] = useHeight(null, 285);\n    const contentRef = useRef(null);\n\n    const hasSelectedMenu = selectedMenu && Object.keys(selectedMenu).length;\n    const isAddTop = isAdd && !hasSelectedMenu;\n    const isAddSub = isAdd && hasSelectedMenu;\n    const title = (() => {\n        if (isAddTop) return WITH_SYSTEMS ? '添加应用' : '添加顶级';\n\n        return isAddSub ? '添加菜单' : '修改菜单';\n    })();\n\n    const {run: deleteMenu} = props.ajax.useDel('/menu/:id', null, {setLoading});\n    const {run: saveMenu} = props.ajax.usePost('/menu/addMenu', null, {setLoading});\n    const {run: branchSaveMenu} = props.ajax.usePost('/menu/addSubMenus', null, {setLoading});\n    const {run: updateMenu} = props.ajax.usePost('/menu/updateMenuById', null, {setLoading});\n    const {run: fetchMenuByName} = props.ajax.useGet('/menu/getOneMenu');\n    const {run: saveRole} = props.ajax.usePost('/role/addRole', null, {setLoading});\n\n    // 表单回显\n    useEffect(() => {\n        form.resetFields();\n        let initialValues = {...selectedMenu, order: selectedMenu?.ord};\n        if (isAddTop) initialValues = {target: 'qiankun'};\n        if (isAddSub) initialValues = {\n            target: 'menu',\n            parentId: selectedMenu.id,\n            systemId: selectedMenu.systemId,\n        };\n\n\n        form.setFieldsValue(initialValues);\n    }, [form, isAdd, isAddTop, isAddSub, selectedMenu]);\n\n    async function handleSubmit(values) {\n        if (loading) return;\n\n        const params = {\n            ...values,\n            type: 1, // 菜单\n            sort: values.order,\n            ord: values.order,\n        };\n\n        if (isAdd) {\n            if (isAddSub && addTabKey === '2') {\n                let {menus, parentId} = values;\n\n                try {\n                    menus = json5.parse(menus);\n                } catch (e) {\n                    return Modal.error({\n                        title: '温馨提示',\n                        content: '批量添加的菜单数据有误，请修正后保存！',\n                    });\n                }\n\n                const params = {menus, parentId};\n                const res = await branchSaveMenu(params);\n                const {id} = res;\n                onSubmit && onSubmit({id, isAdd: true});\n\n            } else {\n                const res = await saveMenu(params);\n                const {id} = res;\n                onSubmit && onSubmit({...params, id, isAdd: true});\n\n                // 有系统的概念，并且是添加顶级，创建一个系统管理员\n                if (WITH_SYSTEMS && isAddTop) {\n                    await saveRole({\n                        systemId: id,\n                        name: '系统管理员',\n                        enabled: true,\n                        remark: '拥有当前子系统所有权限',\n                        type: 2,\n                    });\n                }\n            }\n        } else {\n            await updateMenu(params);\n            onSubmit && onSubmit({...params, isUpdate: true});\n        }\n    }\n\n\n    const checkName = useDebounceValidator(async (rule, value) => {\n        if (!value) return;\n\n        const menu = await fetchMenuByName({name: value});\n        if (!menu) return;\n\n        const id = form.getFieldValue('id');\n        const menuId = `${menu.id}`;\n        if (isAdd && menu.name === value) throw Error('注册名称不能重复！');\n        if (!isAdd && menuId !== id && menu.name === value) throw Error('注册名称不能重复！');\n    });\n\n    async function handleDelete() {\n        const id = selectedMenu?.id;\n        await deleteMenu({id});\n\n        onSubmit && onSubmit({id, isDelete: true});\n    }\n\n    const layout = {\n        labelCol: {flex: '100px'},\n    };\n\n    return (\n        <Form\n            className={styles.pane}\n            name={`menu-form`}\n            form={form}\n            onFinish={handleSubmit}\n            onValuesChange={onValuesChange}\n            initialValues={{enabled: true}}\n        >\n            <h3 className={styles.title}>{title}</h3>\n            <Content ref={contentRef} loading={loading} className={styles.content}>\n                {isAddSub ? (\n                    <Tabs\n                        activeKey={addTabKey}\n                        onChange={key => setAddTabKey(key)}\n                    >\n                        <TabPane key=\"1\" tab=\"单个添加\"/>\n                        <TabPane key=\"2\" tab=\"批量添加\"/>\n                    </Tabs>\n                ) : null}\n                <FormItem name=\"id\" hidden/>\n                <FormItem name=\"parentId\" hidden/>\n                {addTabKey === '1' ? (\n                    <>\n                        <FormItem\n                            {...layout}\n                            label=\"类型\"\n                            type=\"select\"\n                            name=\"target\"\n                            options={menuTargetOptions}\n                            tooltip=\"指定类型之后，将以乾坤子项目或第三方网站方式打开\"\n                            required\n                            getPopupContainer={() => contentRef.current}\n                        />\n                        <FormItem\n                            {...layout}\n                            label=\"标题\"\n                            name=\"title\"\n                            required\n                            tooltip=\"菜单标题\"\n                        />\n                        <FormItem\n                            {...layout}\n                            type=\"number\"\n                            label=\"排序\"\n                            name=\"order\"\n                            tooltip=\"降序，越大越靠前\"\n                        />\n                        <FormItem\n                            {...layout}\n                            label=\"路径\"\n                            name=\"path\"\n                            tooltip=\"菜单路径或第三方网站地址\"\n                        />\n                        <FormItem\n                            {...layout}\n                            type=\"switch\"\n                            label=\"启用\"\n                            name=\"enabled\"\n                            checkedChildren=\"启\"\n                            unCheckedChildren=\"禁\"\n                            tooltip=\"是否启用\"\n                        />\n                        <FormItem shouldUpdate noStyle>\n                            {({getFieldValue}) => {\n                                const target = getFieldValue('target');\n                                if (target === 'qiankun') {\n                                    return (\n                                        <>\n                                            <FormItem\n                                                {...layout}\n                                                label=\"注册名称\"\n                                                tooltip=\"要与子应用package.json中声明的name属性相同，唯一不可重复\"\n                                                name=\"name\"\n                                                rules={[\n                                                    {validator: checkName},\n                                                    {pattern: /^[0-9A-Za-z_-]+$/, message: '只允许英文大小写、_、-！'},\n                                                ]}\n                                                required\n                                            />\n                                            <FormItem\n                                                {...layout}\n                                                label=\"入口地址\"\n                                                tooltip=\"http(s)开头的网址\"\n                                                name=\"entry\"\n                                                rules={[\n                                                    {\n                                                        validator: (rule, value) => {\n                                                            if (value && !value.startsWith('http')) return Promise.reject('请输入正确的入口地址！');\n                                                            return Promise.resolve();\n                                                        },\n                                                    },\n                                                ]}\n                                                noSpace\n                                                required\n                                            />\n                                        </>\n                                    );\n                                }\n\n                                return (\n                                    <FormItem\n                                        {...layout}\n                                        label=\"基础路径\"\n                                        name=\"basePath\"\n                                        tooltip=\"所有其子菜单路径将以此为前缀\"\n                                    />\n                                );\n                            }}\n                        </FormItem>\n                    </>\n                ) : (\n                    <FormItem\n                        labelCol={{flex: 0}}\n                        type=\"textarea\"\n                        name=\"menus\"\n                        rows={16}\n                        rules={[\n                            {required: true, message: '请输入菜单数据！'},\n                        ]}\n                        style={{height: textAreaHeight}}\n                        placeholder={`批量添加子菜单，结构如下：\n[\n    {id: 'system', title: '系统管理', order: 900},\n    {id: 'user', parentId: 'system', title: '用户管理', path: '/users', order: 900},\n    {id: 'menus', parentId: 'system', title: '菜单管理', path: '/menus', order: 900},\n    {id: 'role', parentId: 'system', title: '角色管理', path: '/roles', order: 900},\n    {\n        id: 'demo', parentId: 'system', title: '测试子应用',\n        target: 'qiankun',\n\n        name: 'react-admin',\n        entry: 'http://localhost:3000',\n\n        order: 850,\n    },\n]\n                            `}\n                    />\n                )}\n            </Content>\n            <Space className={styles.footerAction}>\n                {!isAdd ? (\n                    <Popconfirm\n                        title={`您确定删除「${selectedMenu?.title}」？`}\n                        onConfirm={handleDelete}\n                    >\n                        <Button loading={loading} danger>删除</Button>\n                    </Popconfirm>\n                ) : null}\n                <Button loading={loading} type=\"primary\" htmlType=\"submit\">保存</Button>\n            </Space>\n        </Form>\n    );\n});\n","import {useState, useEffect} from 'react';\nimport {Button, Empty, Form, Space} from 'antd';\nimport {MinusCircleOutlined, PlusOutlined} from '@ant-design/icons';\nimport {FormItem, Content} from '@ra-lib/admin';\nimport config from 'src/commons/config-hoc';\nimport styles from './style.less';\n\nexport default config()(function ActionEdit(props) {\n    const [form] = Form.useForm();\n    const {isAdd, selectedMenu, onSubmit, onValuesChange} = props;\n    const [loading, setLoading] = useState(false);\n    const {run: save} = props.ajax.usePost('/menu/updateSubActions', null, {setLoading, successTip: '功能保存成功！'});\n\n    async function handleSubmit(values) {\n        const {actions} = values;\n        const parentId = selectedMenu?.id;\n\n        await save({actions, parentId});\n\n        onSubmit && onSubmit(actions);\n    }\n\n    useEffect(() => {\n        form.resetFields();\n\n        if (!selectedMenu) return;\n\n        form.setFieldsValue({actions: selectedMenu?.actions});\n    }, [selectedMenu, form]);\n\n    return (\n        <Form\n            className={styles.pane}\n            name={`action-form`}\n            form={form}\n            onFinish={handleSubmit}\n            onValuesChange={onValuesChange}\n        >\n            <h3 className={styles.title}>功能列表</h3>\n            <Content loading={loading} className={styles.content}>\n                {isAdd ? (\n                    <Empty style={{marginTop: 50}} description=\"请选择或保存新增菜单\"/>\n                ) : (\n                    <Form.List name=\"actions\">\n                        {(fields, {add, remove}) => (\n                            <>\n                                {fields.map(({key, name}) => {\n                                    return (\n                                        <Space key={key} style={{display: 'flex', marginBottom: 8}} align=\"baseline\">\n                                            <FormItem\n                                                hidden\n                                                name={[name, 'id']}\n                                            />\n                                            <FormItem\n                                                type=\"switch\"\n                                                name={[name, 'enabled']}\n                                                initialValue={true}\n                                                checkedChildren=\"启\"\n                                                unCheckedChildren=\"禁\"\n                                            />\n                                            <FormItem\n                                                name={[name, 'title']}\n                                                placeholder=\"名称\"\n                                                rules={[{required: true, message: '请输入名称！'}]}\n                                            />\n                                            <FormItem\n                                                name={[name, 'code']}\n                                                placeholder=\"编码\"\n                                                rules={[{required: true, message: '请输入编码！'}]}\n                                            />\n                                            <MinusCircleOutlined style={{color: 'red'}} onClick={() => remove(name)}/>\n                                        </Space>\n                                    );\n                                })}\n                                <FormItem>\n                                    <Button type=\"dashed\" onClick={() => add()} block icon={<PlusOutlined/>}>\n                                        新增编码\n                                    </Button>\n                                </FormItem>\n                            </>\n                        )}\n                    </Form.List>\n                )}\n            </Content>\n            <Space className={styles.footerAction}>\n                <Button loading={loading} disabled={isAdd} type=\"primary\" htmlType=\"submit\">保存</Button>\n            </Space>\n        </Form>\n    );\n});\n","import {useEffect, useState, useMemo} from 'react';\nimport {Menu, Button, Space, Empty} from 'antd';\nimport {\n    PageContent,\n    confirm,\n    convertToTree,\n    sort,\n    findNextNode,\n} from '@ra-lib/admin';\nimport config from 'src/commons/config-hoc';\nimport {WITH_SYSTEMS} from 'src/config';\nimport MenuEdit from './MenuEdit';\nimport ActionEdit from './ActionEdit';\nimport theme from 'src/theme.less';\nimport styles from './style.less';\n\nexport default config({\n    path: '/menus',\n})(function MenuManager(props) {\n    const [isAdd, setIsAdd] = useState(true);\n    const [selectedMenu, setSelectedMenu] = useState(null);\n    const [hasUnSaveMenu, setHasUnSaveMenu] = useState(false);\n    const [hasUnSaveAction, setHasUnSaveAction] = useState(false);\n    const {loading, data: menus = [], run: fetchMenus} = props.ajax.useGet('/menu/queryMenus', null, {\n        formatResult: res => {\n            return (res || []).map((item, index, arr) => {\n                const actions = arr.filter(it => it.type === 2 && it.parentId === item.id);\n                return {\n                    ...item,\n                    id: '' + item.id,\n                    parentId: item.parentId ? '' + item.parentId : item.parentId,\n                    order: item.order ?? item.sort ?? item.ord,\n                    actions,\n                };\n            }).filter(item => item.type === 1);\n        },\n    });\n\n    async function checkUnSave(showTip = true) {\n        if (showTip && hasUnSaveMenu) await confirm('菜单有未保存数据，是否放弃？');\n        setHasUnSaveMenu(false);\n\n        if (showTip && hasUnSaveAction) await confirm('功能列表有未保存数据，是否放弃？');\n        setHasUnSaveAction(false);\n    }\n\n    async function handleClick({key}, showTip = true) {\n        await checkUnSave(showTip);\n\n        const menuData = menus.find(item => item.id === key);\n        setSelectedMenu(menuData);\n        setIsAdd(false);\n    }\n\n    const [menuItems, menuTreeData] = useMemo(() => {\n        const menuTreeData = convertToTree(sort(menus, (a, b) => b.order - a.order));\n        const loop = (nodes) => nodes.map(item => {\n            let {id, icon, title, children} = item;\n\n            if (children && children.length) {\n                return (\n                    <Menu.SubMenu\n                        key={id}\n                        title={(\n                            <span\n                                onClick={async e => {\n                                    e.stopPropagation();\n                                    await handleClick({key: id});\n                                }}\n                            >\n                                {title}\n                            </span>\n                        )}\n                        icon={icon}\n                        className={selectedMenu?.id === id ? `${theme.antPrefix}-menu-item-selected` : ''}\n                        data-menu={item}\n                    >\n                        {loop(children)}\n                    </Menu.SubMenu>\n                );\n            }\n            return (\n                <Menu.Item key={id} icon={icon} data-menu={item}>\n                    {title}\n                </Menu.Item>\n            );\n        });\n\n        return [loop(menuTreeData), menuTreeData];\n        // eslint-disable-next-line\n    }, [menus, selectedMenu, hasUnSaveMenu]);\n\n    useEffect(() => {\n        (async () => {\n            await fetchMenus();\n        })();\n        // eslint-disable-next-line\n    }, []);\n\n    async function handleMenuSubmit(data) {\n        setHasUnSaveMenu(false);\n        const {isAdd, isDelete, isUpdate, id} = data;\n\n        await fetchMenus();\n\n        if (isAdd) {\n            setSelectedMenu({...selectedMenu});\n        }\n\n        if (isUpdate) {\n\n        }\n\n        if (isDelete) {\n            const nextNode = findNextNode(menuTreeData, id);\n            if (nextNode) {\n                await handleClick({key: nextNode.id}, false);\n            } else {\n                // 删没了\n                setSelectedMenu({});\n                setIsAdd(true);\n            }\n        }\n    }\n\n    async function handleActionSubmit() {\n        setHasUnSaveAction(false);\n\n        await fetchMenus();\n    }\n\n    return (\n        <PageContent loading={loading} fitHeight className={styles.menuRoot}>\n            <div className={styles.menu}>\n                <Space className={styles.menuTop}>\n                    <Button\n                        type=\"primary\"\n                        onClick={async () => {\n                            await checkUnSave();\n                            setIsAdd(true);\n                            setSelectedMenu(null);\n                        }}\n                    >\n                        {WITH_SYSTEMS ? '添加应用' : '添加顶级'}\n                    </Button>\n                    <Button\n                        disabled={!selectedMenu}\n                        type=\"primary\"\n                        onClick={async () => {\n                            await checkUnSave();\n                            setIsAdd(true);\n                        }}\n                    >\n                        添加子级\n                    </Button>\n                </Space>\n                <div className={styles.menuContent}>\n                    {menus?.length ? (\n                        <Menu\n                            mode=\"inline\"\n                            selectable\n                            selectedKeys={[selectedMenu?.id]}\n                            onClick={info => handleClick(info)}\n                        >\n                            {menuItems}\n                        </Menu>\n                    ) : (\n                        <Empty style={{marginTop: 58}} description=\"暂无数据\"/>\n                    )}\n                </div>\n            </div>\n            <MenuEdit\n                isAdd={isAdd}\n                selectedMenu={selectedMenu}\n                onSubmit={handleMenuSubmit}\n                onValuesChange={() => setHasUnSaveMenu(true)}\n            />\n            <ActionEdit\n                isAdd={isAdd}\n                selectedMenu={selectedMenu}\n                onValuesChange={() => setHasUnSaveAction(true)}\n                onSubmit={handleActionSubmit}\n            />\n        </PageContent>\n    );\n});\n","import {wrapperOptions} from '@ra-lib/admin';\n\n/**\n * 使用 require.context 自动引入所有model文件\n * */\nconst result = {};\n\n// src/models目录下，不支持子文件夹\nconst req = require.context('./', false, /\\.js$/);\nreq.keys().forEach(key => {\n    if ([\n        './index.js',\n    ].includes(key)) return;\n\n    const model = req(key);\n\n    const options = model.default;\n    Object.entries(options).forEach(([k, value]) => {\n        if (k in result) throw Error(`${key} 文件中 key 「${k}」已被使用！请更换！`);\n        result[k] = value;\n    });\n});\n\nwrapperOptions(result, 1000 * 5);\n\nexport default result;\n","var map = {\n\t\"./index.js\": 963,\n\t\"./system.js\": 970\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 969;","import {Tag} from 'antd';\nimport ajax from 'src/commons/ajax';\n\n/**\n * 项目中可能用到的一些枚举类数据\n * 约定只含有三个参数，\n * {\n *  value: 1,      // 必须且不可重复\n *  label: '名称', // 必须\n *  meta: {},     // 其他数据，可缺省\n *  tag: Tag      // 标签\n * };\n *\n * // 扩展方法\n * options.menuTarget.getLabel('menu')\n * options.yesNo.getTag(true);\n * */\nexport default {\n    // 菜单目标\n    menuTarget: [\n        {value: 'menu', label: '应用菜单'},\n        {value: 'qiankun', label: '乾坤子应用'},\n        {value: 'iframe', label: 'iframe内嵌第三方'},\n        {value: '_self', label: '当前窗口打开第三方'},\n        {value: '_blank', label: '新开窗口打开第三方'},\n    ],\n    // 是否\n    yesNo: [\n        {value: true, label: '是', tag: <Tag color=\"green\">是</Tag>},\n        {value: false, label: '否', tag: <Tag color=\"red\">否</Tag>},\n    ],\n    // 启用、禁用\n    enabled: [\n        {value: true, label: '启用', tag: <Tag color=\"green\">启用</Tag>},\n        {value: false, label: '禁用', tag: <Tag color=\"red\">禁用</Tag>},\n    ],\n    // 性别\n    sex: [\n        {value: '1', label: '男'},\n        {value: '2', label: '女'},\n        {value: '3', label: '未知'},\n    ],\n    // 可以是函数，异步或同步都可以\n    async system() {\n        const list = await ajax.get('/menu/queryTopMenus');\n        return list.map(item => {\n            return {\n                value: item.id,\n                label: item.title,\n                meta: item,\n            };\n        });\n    },\n    action() {\n        return [\n            {value: 'add', label: '添加'},\n        ];\n        // throw Error('获取失败了');\n    },\n    // 使用 get\n    get demo() {\n        return [];\n    },\n};\n\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-10-1!../../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-10-2!./style.less\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};"],"sourceRoot":""}