{"version":3,"sources":["pages/login/index.jsx","webpack://react-admin-drag/./src/pages/login/style.less?354f","pages/login/style.less","../node_modules/css-loader/dist/runtime/getUrl.js","pages/login/login-bg.jpg"],"names":["config","path","auth","layout","props","login","ajax","usePost","useState","message","setMessage","isMount","setIsMount","useForm","form","useEffect","process","REACT_APP_PREVIEW","setFieldsValue","account","password","imageCode","messageCode","setTimeout","formItemClass","styles","formItem","active","root","title","logo","box","name","onFinish","values","loading","params","run","Promise","resolve","id","token","errorTip","then","res","others","setLoginUser","toHome","catch","err","console","error","response","data","header","allowClear","autoFocus","prefix","placeholder","required","type","noStyle","shouldUpdate","style","marginBottom","htmlType","disabled","isFieldsTouched","getFieldsError","filter","errors","length","submitBtn","api","content","__esModule","default","module","i","options","exports","locals","___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","push","url","test","slice","hash","needQuotes","concat","replace"],"mappings":"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","file":"static/js/8.6461d84d.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { Button, Form } from 'antd';\nimport { LockOutlined, UserOutlined } from '@ant-design/icons';\nimport { FormItem, setLoginUser } from '@ra-lib/admin';\nimport config from 'src/commons/config-hoc';\nimport { toHome } from 'src/commons';\nimport { Logo } from 'src/components';\nimport styles from './style.less';\n\nexport default config({\n    path: '/login',\n    auth: false,\n    layout: false,\n})(function Login(props) {\n    const login = props.ajax.usePost('/login');\n    const [message, setMessage] = useState();\n    const [isMount, setIsMount] = useState(false);\n    const [form] = Form.useForm();\n\n    function handleSubmit(values) {\n        if (login.loading) return;\n\n        const params = {\n            ...values,\n        };\n        login.run = () => Promise.resolve({ id: 1, name: '测试', token: 'test' });\n        login.run(params, { errorTip: false })\n            .then(res => {\n                const { id, name, token, ...others } = res;\n                setLoginUser({\n                    id,     // 必须字段\n                    name,   // 必须字段\n                    token,\n                    ...others,\n                    // 其他字段按需添加\n                });\n                toHome();\n            })\n            .catch((err) => {\n                console.error(err);\n                setMessage(err.response?.data?.message || '用户名或密码错误');\n            });\n    }\n\n    useEffect(() => {\n        // 开发时默认填入数据\n        if (process.env.NODE_ENV === 'development' || process.env.REACT_APP_PREVIEW) {\n            form.setFieldsValue({\n                account: 'admin',\n                password: '123456',\n                imageCode: '0000',\n                messageCode: '0000',\n            });\n        }\n\n        setTimeout(() => setIsMount(true), 300);\n    }, [form]);\n\n    const formItemClass = [styles.formItem, { [styles.active]: isMount }];\n\n    return (\n        <div className={styles.root}>\n            <Helmet title=\"欢迎登录\" />\n            <div className={styles.logo}>\n                <Logo />\n            </div>\n            <div className={styles.box}>\n                <Form\n                    form={form}\n                    name=\"login\"\n                    onFinish={handleSubmit}\n                >\n                    <div className={formItemClass}>\n                        <h1 className={styles.header}>欢迎登录</h1>\n                    </div>\n                    <div className={formItemClass}>\n                        <FormItem\n                            name=\"account\"\n                            allowClear\n                            autoFocus\n                            prefix={<UserOutlined />}\n                            placeholder=\"请输入用户名\"\n                            required\n                        />\n                    </div>\n                    <div className={formItemClass}>\n                        <FormItem\n                            type=\"password\"\n                            name=\"password\"\n                            prefix={<LockOutlined />}\n                            placeholder=\"请输入密码\"\n                            required\n                        />\n                    </div>\n                    <div className={formItemClass}>\n                        <FormItem noStyle shouldUpdate style={{ marginBottom: 0 }}>\n                            {() => (\n                                <Button\n                                    className={styles.submitBtn}\n                                    loading={login.loading}\n                                    type=\"primary\"\n                                    htmlType=\"submit\"\n                                    disabled={\n                                        // 用户没有操作过，或者没有setFieldsValue\n                                        !form.isFieldsTouched(true)\n                                        // 表单中存在错误\n                                        || form.getFieldsError().filter(({ errors }) => errors.length).length\n                                    }\n                                >\n                                    登录\n                                </Button>\n                            )}\n                        </FormItem>\n                    </div>\n                </Form>\n                <div className={styles.errorTip}>{message}</div>\n            </div>\n        </div>\n    );\n});\n\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-10-1!../../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-10-2!./style.less\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nimport ___CSS_LOADER_URL_IMPORT_0___ from \"./login-bg.jpg\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".root_27x2_ {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  margin: 0;\\n  height: 100vh;\\n  background-image: url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \");\\n  background-size: cover;\\n  background-position: center;\\n  background-repeat: no-repeat;\\n}\\n.logo_215K2 {\\n  position: absolute;\\n  top: 16px;\\n  left: 16px;\\n}\\n.box_3GeED {\\n  padding: 16px 40px;\\n  width: 350px;\\n  border-radius: 0;\\n  z-index: 100;\\n}\\n.box_3GeED .header_1IDbf {\\n  font-size: 25px;\\n  text-align: center;\\n  color: #fff;\\n  font-weight: bolder;\\n}\\n.box_3GeED .submitBtn_2uMDZ {\\n  width: 100%;\\n}\\n.box_3GeED .errorTip_3n82Q {\\n  height: 30px;\\n  line-height: 30px;\\n  text-align: center;\\n  color: red;\\n}\\n.box_3GeED .formItem_tHdOe {\\n  transition-delay: 5s;\\n  transition: 500ms;\\n  transform: translateX(100%);\\n  margin-bottom: 24px;\\n}\\n.box_3GeED .formItem_tHdOe:nth-child(2n) {\\n  transform: translateX(-100%);\\n}\\n.box_3GeED .formItem_tHdOe.active_h8omp {\\n  transform: translateX(0);\\n}\\n.box_3GeED .ant-input {\\n  height: 34px;\\n}\\n.box_3GeED .ant-btn {\\n  height: 44px;\\n}\\n.box_3GeED .ant-form-item-explain {\\n  position: absolute !important;\\n  bottom: -24px !important;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://src/pages/login/style.less\"],\"names\":[],\"mappings\":\"AAEA;EACI,aAAA;EACA,uBAAA;EACA,mBAAA;EACA,SAAA;EACA,aAAA;EACA,yDAAA;EACA,sBAAA;EACA,2BAAA;EACA,4BAAA;AAIJ;AADA;EACI,kBAAA;EACA,SAAA;EACA,UAAA;AAGJ;AAAA;EACI,kBAAA;EACA,YAAA;EAEA,gBAAA;EAEA,YAAA;AAAJ;AANA;EASQ,eAAA;EACA,kBAAA;EACA,WAAA;EACA,mBAAA;AAAR;AAZA;EAgBQ,WAAA;AADR;AAfA;EAoBQ,YAAA;EACA,iBAAA;EACA,kBAAA;EACA,UAAA;AAFR;AArBA;EA2BQ,oBAAA;EACA,iBAAA;EACA,2BAAA;EACA,mBAAA;AAHR;AAKQ;EACI,4BAAA;AAHZ;AAMQ;EACI,wBAAA;AAJZ;AAjCA;EA2CY,YAAA;AAPZ;AApCA;EA+CY,YAAA;AARZ;AAvCA;EAmDY,6BAAA;EACA,wBAAA;AATZ\",\"sourcesContent\":[\"@import \\\"src/theme\\\";\\n\\n.root {\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    margin: 0;\\n    height: 100vh;\\n    background-image: url(\\\"./login-bg.jpg\\\");\\n    background-size: cover;\\n    background-position: center;\\n    background-repeat: no-repeat;\\n}\\n\\n.logo {\\n    position: absolute;\\n    top: 16px;\\n    left: 16px;\\n}\\n\\n.box {\\n    padding: 16px 40px;\\n    width: 350px;\\n\\n    border-radius: 0;\\n    // background: #f8f8f9;\\n    z-index: 100;\\n\\n    .header {\\n        font-size: 25px;\\n        text-align: center;\\n        color: #fff;\\n        font-weight: bolder;\\n    }\\n\\n    .submitBtn {\\n        width: 100%;\\n    }\\n\\n    .errorTip {\\n        height: 30px;\\n        line-height: 30px;\\n        text-align: center;\\n        color: red;\\n    }\\n\\n    .formItem {\\n        transition-delay: 5s;\\n        transition: 500ms;\\n        transform: translateX(100%);\\n        margin-bottom: 24px;\\n\\n        &:nth-child(2n) {\\n            transform: translateX(-100%);\\n        }\\n\\n        &.active {\\n            transform: translateX(0);\\n        }\\n    }\\n\\n    :global {\\n        .@{ant-prefix}-input {\\n            height: 34px;\\n        }\\n\\n        .@{ant-prefix}-btn {\\n            height: 44px;\\n        }\\n\\n        .@{ant-prefix}-form-item-explain {\\n            position: absolute !important;\\n            bottom: -24px !important;\\n        }\\n    }\\n}\\n\\n@packageName: react-admin-drag;\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"antPrefix\": \"ant\",\n\t\"raLibPrefix\": \"ra-lib\",\n\t\"primaryColor\": \"#1890ff\",\n\t\"root\": \"root_27x2_\",\n\t\"logo\": \"logo_215K2\",\n\t\"box\": \"box_3GeED\",\n\t\"header\": \"header_1IDbf\",\n\t\"submitBtn\": \"submitBtn_2uMDZ\",\n\t\"errorTip\": \"errorTip_3n82Q\",\n\t\"formItem\": \"formItem_tHdOe\",\n\t\"active\": \"active_h8omp\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    // eslint-disable-next-line no-param-reassign\n    options = {};\n  } // eslint-disable-next-line no-underscore-dangle, no-param-reassign\n\n\n  url = url && url.__esModule ? url.default : url;\n\n  if (typeof url !== 'string') {\n    return url;\n  } // If url is already wrapped in quotes, remove them\n\n\n  if (/^['\"].*['\"]$/.test(url)) {\n    // eslint-disable-next-line no-param-reassign\n    url = url.slice(1, -1);\n  }\n\n  if (options.hash) {\n    // eslint-disable-next-line no-param-reassign\n    url += options.hash;\n  } // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n\n\n  if (/[\"'() \\t\\n]/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n'), \"\\\"\");\n  }\n\n  return url;\n};","export default __webpack_public_path__ + \"static/media/login-bg.3ab1656e.jpg\";"],"sourceRoot":""}